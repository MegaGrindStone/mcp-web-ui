{{define "chat_title"}}
<div class="list-group-item list-group-item-action {{if .Active}}active{{end}}">
    <div class="d-flex justify-content-between align-items-center">
        <button type="button" 
                class="btn text-decoration-none flex-grow-1 text-start p-0 border-0 bg-transparent"
                onclick="window.location.href='/?chat_id={{.ID}}'">
            <span id="title-{{.ID}}">{{if .Title}}{{.Title}}{{else}}New Chat{{end}}</span>
        </button>
        
        {{if .Title}}
        <button class="btn btn-sm text-start" 
                type="button"
                hx-post="/refresh-title" 
                hx-vals='{"chat_id": "{{.ID}}"}'
                hx-target="#title-{{.ID}}"
                hx-swap="innerHTML"
                title="Refresh title">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
                <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
            </svg>
        </button>
        {{end}}
    </div>
</div>
{{end}}
